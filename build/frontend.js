!function(e){const t=e("#send-invitations"),n=e("#send-invitations-list");let o;$newConnectionSearch=e("#new-connection-search"),$newConnectionSearch.length&&($newConnectionSearch.autocomplete({minLength:2,source:ajaxurl+"?action=openlab_connection_group_search",select:function(e,t){if(document.getElementById("connection-invitation-group-"+t.item.groupId))return!1;const o=wp.template("openlab-connection-invitation")(t.item);return n.append(o),c(),!1}}).autocomplete("instance")._renderItem=function(t,n){return e("<li>").append("<div><strong>"+n.groupName+"</strong><br>"+n.groupUrl+"</div>").appendTo(t)}),n.on("click",".remove-connection-invitation",(function(e){return e.target.closest(".group-item").remove(),c(),!1}));const c=()=>{n.children().length>0?t.show():t.hide()};document.querySelectorAll(".accordion").forEach((e=>{const t=e.querySelector(".accordion-toggle"),n=e.querySelector(".accordion-content");t.addEventListener("click",(()=>{const e="true"===t.getAttribute("aria-expanded")||!1;t.setAttribute("aria-expanded",!e),n.style.display=e?"none":"block"}))})),document.querySelectorAll(".disconnect-button").forEach((e=>{const t=e.getAttribute("aria-label"),n=e.innerHTML;e.addEventListener("mouseenter",(()=>{e.textContent=t})),e.addEventListener("mouseleave",(()=>{e.textContent=n}))})),e(".connection-tax-term-selector").select2({width:"80%"});const i=()=>{document.querySelectorAll(".connection-settings").forEach((e=>{const t=e.querySelector(".connection-setting-none");t&&(e.querySelector(".connection-tax-term-selector").selectedOptions.length>0?t.checked=!1:t.checked=!0,t.checked?(e.classList.add("disabled"),e.querySelector(".connection-tax-term-selector").disabled=!0,e.querySelector(".connection-setting-exclude-comments").disabled=!0):(e.classList.remove("disabled"),e.querySelector(".connection-tax-term-selector").disabled=!1,e.querySelector(".connection-setting-exclude-comments").disabled=!1))}))};i(),e(".connection-setting-none").on("change",(t=>{const n=e(t.target).closest(".connection-settings").find(".connection-tax-term-selector");n&&(t.target.checked?n.val([]).trigger("change"):n.val(["_all"]).trigger("change"),i())}));const s=t=>{const n=document.getElementById("connection-settings-"+t),o=e("#connection-"+t+"-categories").val(),c=document.getElementById("connection-"+t+"-exclude-comments").checked,i=e("#connection-settings-"+t+"-nonce").val(),s={connectionId:t,excludeComments:c,selectedPostCategories:o,groupId:n.closest(".connections-settings").dataset.groupId,nonce:i};e.post({url:ajaxurl+"?action=openlab_connections_save_connection_settings",data:s})};document.querySelectorAll('.connection-settings input[type="checkbox"]').forEach((e=>{e.addEventListener("change",(()=>{i(),clearTimeout(o),o=setTimeout((()=>{s(e.closest(".connection-settings").dataset.connectionId)}),500)}))})),e(".connection-settings select").on("select2:selecting",(t=>{const n=e(t.target).val(),o=t.params.args.data.id;let c;"_all"===o?c=["_all"]:(c=n.filter((e=>"_all"!==e)),c.push(o)),e(t.target).val(c).trigger("change")})),e(".connection-settings select").on("change.select2",(e=>{i(),clearTimeout(o),o=setTimeout((()=>{s(e.target.closest(".connection-settings").dataset.connectionId)}),500)}))}(jQuery);